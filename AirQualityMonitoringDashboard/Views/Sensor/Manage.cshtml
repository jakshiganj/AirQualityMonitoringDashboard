@model List<Sensor>

    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sensor Collection</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="site.css">
        <style>
            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }

            th,
            td {
                border: 1px solid black;
                padding: 10px;
                text-align: center;
            }

            th {
                background-color: #ddd;
            }
        </style>
    </head>

    <body style="padding: 20px; background-color: #f0f0f0; font-family: Arial, sans-serif;">
        <div style="text-align: center;">
            <h1>System Sensor Collection View</h1>
        </div>
        <div style="display: flex; justify-content: space-between; margin-top: 30px;">
            <h2>Connected Sensors</h2>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addSensorModal">
                Add Sensor
            </button>
        </div>
        <div>
            <table>
                <thead>
                    <tr>
                        <th>Sensor Name</th>
                        <th style="width: 190px;max-width: 190px; white-space: nowrap;"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var sensor in Model)
                    {
                    <tr>
                        <td>
                            <div class="collapse-item">
                                <input type="checkbox" id="collapse-@sensor.Id" hidden>
                                <label for="collapse-@sensor.Id">
                                    @sensor.Name
                                </label>
                                <div class="collapse-text">
                                    <p>
                                        <strong>Sensor Type: </strong> @sensor.Type <br>
                                        <strong>Sensor Status: </strong> @sensor.Status <br>
                                        <strong>Sensor Location: </strong> @sensor.Location <br>
                                        <strong>Sensor Description: </strong> @sensor.Description <br>
                                        <strong>Sensor Created: </strong>@sensor.CreatedAt.ToString("yyyy-MM-dd HH:mm:ss")<br>
                                    </p>
                                    @if (sensor.AQIData != null && sensor.AQIData.Any()) {
                                    <ul>
                                        @foreach (var aqi in sensor.AQIData)
                                                {
                                        <li>
                                            <strong>Data: </strong> @aqi.Value,
                                        </li>
                                        <li>
                                            <strong>Last Recorded: </strong> @aqi.Date.ToString("yyyy-MM-dd")
                                        </li>
                                                }
                                    </ul>
                                        } else {
                                            No AQI data available
                                        }
                                </div>
                            </div>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editSensorModal"
                                    onclick="populateEditForm( '@sensor.Name', '@sensor.Type', '@sensor.Location', '@sensor.Description')">
                                Edit
                            </button>
                            <button type="button" class="btn btn-primary">
                                Delete
                            </button>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Add Sensor Modal -->
        <div class="modal fade" id="addSensorModal" tabindex="-1" role="dialog" aria-labelledby="addSensorModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addSensorTitle">Add new Sensor</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="addSensorForm" method="post" action="">
                            <div>
                                <label for="addSensorName">Sensor Name</label>
                                <input type="text" id="addSensorName" class="form-control" />
                            </div>
                            <div>
                                <label for="addSensorLocation">Sensor Location</label>
                                <input type="text" id="addSensorLocation" class="form-control" />
                            </div>
                            <div>
                                <label for="addSensorType">Sensor Type</label>
                                <input type="text" id="addSensorType" class="form-control" />
                            </div>
                            <div>
                                <label for="addSensorDescription">Sensor Description</label>
                                <input type="text" id="addSensorDescription" class="form-control" />
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="AddSenorForm()">Add Sensor</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Sensor Modal -->
        <div class="modal fade" id="editSensorModal" tabindex="-1" role="dialog" aria-labelledby="editSensorModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editSensorTitle">Edit Sensor Details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="editSensorForm" method="post" action="">
                            <div style="padding-bottom: 10;">
                                <label for="editSensorName">Sensor Name</label>
                                <input type="text" id="editSensorName" class="form-control" />
                            </div>
                            <div style="padding-bottom: 10;">
                                <label for="editSensorLocation">Sensor Location</label>
                                <input type="text" id="editSensorLocation" class="form-control" />
                            </div>
                            <div style="padding-bottom: 10;">
                                <label for="editSensorType">Sensor Type</label>
                                <input type="text" id="editSensorType" class="form-control" />
                            </div>
                            <div style="padding-bottom: 10;">
                                <label for="editSensorDescription">Sensor Description</label>
                                <input type="text" id="editSensorDescription" class="form-control" />
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="UpdateSensorForm()">Update Sensor</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function populateEditForm(type, name, location, description) {
                $('#editSensorType').val(type);
                $('#editSensorName').val(name);
                $('#editSensorLocation').val(location);
                $('#editSensorDescription').val(description);
            }

            function AddSenorForm(type, name, location, description) {
                var type = $('#addSensorType').val();
                var name = $('#addSensorName').val();
                var location = $('#addSenorLocation').val();
                var description = $('#addSensorDescription').val();
            }

            function UpdateSensorForm(type, name, location, description) {
                var type = $('#addSensorType').val();
                var name = $('#addSensorName').val();
                var location = $('#addSenorLocation').val();
                var description = $('#addSensorDescription').val();
            }
        </script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
                integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
                integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                crossorigin="anonymous"></script>
    </body>

</html>
